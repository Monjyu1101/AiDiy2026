# Dockerç’°å¢ƒã‚¬ã‚¤ãƒ‰

## ğŸš€ èµ·å‹•

```bash
cd docker
docker_1build.bat    # åˆå›ã®ã¿ï¼ˆ5-10åˆ†ï¼‰
docker_2start.bat    # èµ·å‹•ï¼ˆç´„10ç§’ï¼‰
```

## ğŸŒ ã‚¢ã‚¯ã‚»ã‚¹

âš ï¸ **éŸ³å£°æ©Ÿèƒ½ã«ã¯HTTPSå¿…é ˆ**

```
https://localhost/
```

**åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã®è¨¼æ˜æ›¸è­¦å‘Š:**
- Chrome: ã€Œè©³ç´°è¨­å®šã€â†’ã€Œlocalhostã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã€
- Edge: ã€Œè©³ç´°ã€â†’ã€ŒWebãƒšãƒ¼ã‚¸ã¸ç§»å‹•ã€

**ãƒ­ã‚°ã‚¤ãƒ³:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å: `admin`
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: ï¼ˆREADME.mdã‚’ç¢ºèªï¼‰

## ğŸ“š API

```
http://localhost:8091/docs  # Core API (Cç³», Aç³»)
http://localhost:8092/docs  # Apps API (Mç³», Tç³», Vç³», Sç³»)
```

## ğŸ”§ åŸºæœ¬æ“ä½œ

```bash
docker_2start.bat    # èµ·å‹•
docker_3stop.bat     # åœæ­¢
docker_4delete.bat   # å®Œå…¨å‰Šé™¤
```

## ğŸ—‘ï¸ å‰Šé™¤æ–¹æ³•

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: ã‚³ãƒ³ãƒ†ãƒŠåœæ­¢ã®ã¿ï¼ˆãƒ‡ãƒ¼ã‚¿ä¿æŒï¼‰

```bash
docker_3stop.bat
```

- ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢
- ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»SSLè¨¼æ˜æ›¸ã¯ä¿æŒ
- æ¬¡å›ã¯`docker_2start.bat`ã§å†èµ·å‹•å¯èƒ½

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: ã‚³ãƒ³ãƒ†ãƒŠã¨ã‚¤ãƒ¡ãƒ¼ã‚¸å‰Šé™¤

```bash
docker_4delete.bat
```

- ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ãƒ»å‰Šé™¤
- Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å‰Šé™¤
- SSLè¨¼æ˜æ›¸ã‚’å‰Šé™¤
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆ`../_data`ï¼‰ã¯ä¿æŒ
- æ¬¡å›ã¯`docker_1build.bat`ã‹ã‚‰å†æ§‹ç¯‰

### ãƒ‘ã‚¿ãƒ¼ãƒ³3: å®Œå…¨å‰Šé™¤ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚‚å‰Šé™¤ï¼‰

```bash
# 1. ã‚³ãƒ³ãƒ†ãƒŠã¨ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å‰Šé™¤
docker_4delete.bat

# 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‰Šé™¤
cd ..
rmdir /s /q _data

# 3. ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
rmdir /s /q temp
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³4: SSLè¨¼æ˜æ›¸ã®ä¿¡é ¼å‰Šé™¤

è¨¼æ˜æ›¸ã‚’ä¿¡é ¼æ¸ˆã¿ãƒ«ãƒ¼ãƒˆã«è¿½åŠ ã—ãŸå ´åˆï¼š

```cmd
certutil -delstore "Root" localhost
```

## ğŸ” SSLè¨¼æ˜æ›¸

### è¨¼æ˜æ›¸ã®ä¿¡é ¼è¨­å®šï¼ˆè­¦å‘Šã‚’æ¶ˆã™ï¼‰

```cmd
cd docker
certutil -addstore "Root" ssl\cert.pem
```

### è¨¼æ˜æ›¸ã®å†ç”Ÿæˆ

```cmd
cd docker
rmdir /s /q ssl
docker_1build.bat
```

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### HTTPSã§ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„

```bash
docker ps                # ã‚³ãƒ³ãƒ†ãƒŠç¢ºèª
docker logs aidiy2026    # ãƒ­ã‚°ç¢ºèª
docker_3stop.bat         # åœæ­¢
docker_2start.bat        # å†èµ·å‹•
```

### ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­

```cmd
# ãƒãƒ¼ãƒˆç¢ºèª
netstat -ano | findstr :8090
netstat -ano | findstr :443

# ãƒ­ãƒ¼ã‚«ãƒ«èµ·å‹•ã‚’åœæ­¢ã—ã¦ã‹ã‚‰å†å®Ÿè¡Œ
docker_2start.bat
```

### ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

```bash
# å®Œå…¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
docker_4delete.bat
docker system prune -a -f

# å†ãƒ“ãƒ«ãƒ‰
docker_1build.bat
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼

```bash
# åœæ­¢
docker_3stop.bat

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å‰Šé™¤
cd ..
move _data\database.db _data\database.db.backup

# å†èµ·å‹•ï¼ˆæ–°è¦DBè‡ªå‹•ä½œæˆï¼‰
cd docker
docker_2start.bat
```

### ãƒã‚¤ã‚¯ãŒä½¿ãˆãªã„

1. HTTPSã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ã‹ç¢ºèª: `https://localhost/`
2. ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã®éŒ å‰ã‚¢ã‚¤ã‚³ãƒ³ â†’ ãƒã‚¤ã‚¯ â†’ è¨±å¯
3. F12é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ç¢ºèª

## ğŸ“ æŠ€è¡“æƒ…å ±

**ãƒãƒ¼ãƒˆ:**
- 8090: Frontend (Vue 3)
- 8091: Backend Core API
- 8092: Backend Apps API
- 80: HTTPï¼ˆNginxãƒ—ãƒ­ã‚­ã‚·ã€è‡ªå‹•çš„ã«HTTPSã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
- 443: HTTPSï¼ˆNginxãƒ—ãƒ­ã‚­ã‚·ï¼‰

**ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–:**
- `../temp`: ãƒ­ã‚°ãƒ»ä½œæ¥­ãƒ•ã‚¡ã‚¤ãƒ«
- `../_data`: SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `./ssl`: SSLè¨¼æ˜æ›¸

**ã‚³ãƒ³ãƒ†ãƒŠå:**
- `aidiy2026`: ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- `aidiy2026-nginx`: Nginxãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
