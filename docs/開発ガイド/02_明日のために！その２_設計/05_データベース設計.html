<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>05 データベース設計</title>
  <link rel="stylesheet" href="../_shared/doc.css">
  <script src="../_shared/doc.js" defer></script>
</head>
<body>
  <nav>
    <a href="04_内部設計_ビジネスロジック.html">前へ: 04_内部設計_ビジネスロジック</a>
    <a href="_index.html">目次へ戻る</a>
    <a href="06_設計から実装への流れ.html">次へ: 06_設計から実装への流れ</a>
  </nav>

  <h1>05_データベース設計</h1>
  <p>DB設計は、画面項目とAPI項目の最終的な受け皿です。ここでは M商品 テーブル設計と運用前提を整理します。</p>

  <h2>テーブル方針</h2>
  <table>
    <tr><th>項目</th><th>内容</th></tr>
    <tr><td>テーブル名</td><td><code>M商品</code></td></tr>
    <tr><td>主キー</td><td><code>商品ID</code></td></tr>
    <tr><td>DB種別</td><td>SQLite</td></tr>
    <tr><td>文字コード</td><td>UTF-8</td></tr>
  </table>

  <h2>業務カラムと監査カラム</h2>
  <ul>
    <li>業務カラム: 商品ID、商品名、単位、商品備考</li>
    <li>監査カラム（登録）: 登録日時、登録利用者ID、登録利用者名、登録端末ID</li>
    <li>監査カラム（更新）: 更新日時、更新利用者ID、更新利用者名、更新端末ID</li>
  </ul>

  <h2>制約設計の要点</h2>
  <ol>
    <li>商品IDは主キー（重複不可、NULL不可）</li>
    <li>商品名と単位は業務必須（NOT NULL）</li>
    <li>監査カラムのID/日時/端末は必須</li>
    <li>文字数上限はアプリケーション側でバリデーション</li>
  </ol>

  <h2>DB設計書サンプル（原本）</h2>
  <p>以下は <code>code_samples/M商品_DB設計書.sql</code> の内容です。</p>
  <pre data-src="code_samples/M商品_DB設計書.sql"><code>読み込み中...</code></pre>

  <h2>実装時の確認ポイント</h2>
  <table>
    <tr><th>確認項目</th><th>観点</th></tr>
    <tr><td>DDL</td><td>設計書のカラム定義と一致しているか</td></tr>
    <tr><td>APIレスポンス</td><td>画面が必要な項目を不足なく返しているか</td></tr>
    <tr><td>監査値</td><td>登録/更新で想定通り自動設定されるか</td></tr>
    <tr><td>検索性能</td><td>一覧取得で必要に応じた索引設計を検討しているか</td></tr>
  </table>

  <nav>
    <a href="04_内部設計_ビジネスロジック.html">前へ: 04_内部設計_ビジネスロジック</a>
    <a href="_index.html">目次へ戻る</a>
    <a href="06_設計から実装への流れ.html">次へ: 06_設計から実装への流れ</a>
  </nav>
</body>
</html>

